# ç®¡ç†å‘˜æƒé™åˆ†é…æ“ä½œæ‰‹å†Œ

## ğŸ‘¤ ä½ çš„ç®¡ç†å‘˜è´¦å·

```
æ‰‹æœºå·ï¼š17701790343
è§’è‰²ï¼šadmin
å¯†ç ï¼šï¼ˆä½ è‡ªå·±è®¾ç½®çš„å¯†ç ï¼‰
```

âš ï¸ **é‡è¦**ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨ç®¡ç†å‘˜åŠŸèƒ½å‰ï¼Œéœ€è¦**é‡æ–°ç™»å½•**ä»¥è·å–åŒ…å«adminæƒé™çš„æ–°tokenï¼

---

## ğŸ“– ç›®å½•

1. [åŸºç¡€æ“ä½œ](#åŸºç¡€æ“ä½œ)
2. [æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯](#æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯)
3. [åˆ†é…æƒé™](#åˆ†é…æƒé™)
4. [å¸¸è§åœºæ™¯](#å¸¸è§åœºæ™¯)
5. [ä½¿ç”¨Webç•Œé¢ï¼ˆæ¨èï¼‰](#ä½¿ç”¨webç•Œé¢)
6. [ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆé«˜çº§ï¼‰](#ä½¿ç”¨å‘½ä»¤è¡Œ)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
8. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ğŸš€ åŸºç¡€æ“ä½œ

### æ­¥éª¤1ï¼šé‡æ–°ç™»å½•è·å–ç®¡ç†å‘˜token

ä½ çš„è´¦å·å·²ç»æ˜¯adminï¼Œä½†éœ€è¦é‡æ–°ç™»å½•è·å–æ–°tokenï¼š

**æ–¹å¼1ï¼šé€šè¿‡ç½‘é¡µç™»å½•**
1. æ‰“å¼€ http://localhost:3000/auth/login
2. è¾“å…¥æ‰‹æœºå·ï¼š`17701790343`
3. è¾“å…¥å¯†ç 
4. ç™»å½•æˆåŠŸåï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä¿å­˜æ–°token

**æ–¹å¼2ï¼šé€šè¿‡APIç™»å½•**
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "17701790343",
    "password": "ä½ çš„å¯†ç "
  }'
```

ç™»å½•æˆåŠŸåï¼Œè¿”å›çš„tokenä¸­å°±åŒ…å« `role: 'admin'` äº†ã€‚

### æ­¥éª¤2ï¼šéªŒè¯ç®¡ç†å‘˜æƒé™

åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰è¿è¡Œï¼š

```javascript
// æŸ¥çœ‹å½“å‰token
const token = localStorage.getItem('token');
console.log('Token:', token);

// è§£ç æŸ¥çœ‹å†…å®¹ï¼ˆtokenæ˜¯JWTæ ¼å¼ï¼‰
const payload = JSON.parse(atob(token.split('.')[1]));
console.log('ç”¨æˆ·ä¿¡æ¯:', payload);
// åº”è¯¥çœ‹åˆ° role: 'admin'
```

---

## ğŸ” æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯

### æ–¹æ³•1ï¼šé€šè¿‡æ•°æ®åº“æŸ¥çœ‹ï¼ˆæœ€ç›´æ¥ï¼‰

```bash
# æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, email, nickname, role, \"createdAt\" FROM users ORDER BY \"createdAt\" DESC LIMIT 20;"

# æœç´¢ç‰¹å®šç”¨æˆ·ï¼ˆæŒ‰æ‰‹æœºå·ï¼‰
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, email, nickname, role FROM users WHERE phone = '13800138000';"

# æœç´¢ç‰¹å®šç”¨æˆ·ï¼ˆæŒ‰æ˜µç§°ï¼‰
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, email, nickname, role FROM users WHERE nickname LIKE '%å¼ ä¸‰%';"

# æŒ‰è§’è‰²ç­›é€‰
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, nickname, role FROM users WHERE role = 'staff';"

# ç»Ÿè®¡å„è§’è‰²æ•°é‡
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT role, COUNT(*) as count FROM users GROUP BY role;"
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
                  id                  |    phone    |     nickname     | role
--------------------------------------+-------------+------------------+-------
 d5b8dd25-f414-4352-9229-14337ecad259 | 17701790343 | liniuniu-1å·     | admin
 a1b2c3d4-e5f6-7890-abcd-ef1234567890 | 13800138000 | å·¥ä½œäººå‘˜å°æ     | user
 f1e2d3c4-b5a6-9876-dcba-0987654321ef | 13900139000 | å·¥ä½œäººå‘˜å°ç‹     | user
```

ä»è¾“å‡ºä¸­å¤åˆ¶éœ€è¦ä¿®æ”¹çš„ç”¨æˆ·IDã€‚

---

## âš¡ åˆ†é…æƒé™

### æ–¹æ³•1ï¼šä½¿ç”¨curlå‘½ä»¤ï¼ˆæ¨èåˆå­¦è€…ï¼‰

```bash
# 1. è·å–ä½ çš„admin tokenï¼ˆä»æµè§ˆå™¨localStorageå¤åˆ¶ï¼‰
# æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œè¿è¡Œï¼š
# localStorage.getItem('token')

# 2. ä¿®æ”¹ç”¨æˆ·è§’è‰²
curl -X PUT http://localhost:3000/api/admin/users/{ç”¨æˆ·ID}/role \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {ä½ çš„admin_token}" \
  -d '{"role": "staff"}'
```

**å®Œæ•´ç¤ºä¾‹**ï¼š
```bash
# å‡è®¾è¦å°†ç”¨æˆ· a1b2c3d4-e5f6-7890-abcd-ef1234567890 æå‡ä¸ºå·¥ä½œäººå‘˜
curl -X PUT http://localhost:3000/api/admin/users/a1b2c3d4-e5f6-7890-abcd-ef1234567890/role \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -d '{"role": "staff"}'
```

**æˆåŠŸå“åº”**ï¼š
```json
{
  "ok": true,
  "message": "ç”¨æˆ·è§’è‰²å·²æ›´æ–°ï¼šuser â†’ staff",
  "data": {
    "userId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "phone": "13800138000",
    "nickname": "å·¥ä½œäººå‘˜å°æ",
    "oldRole": "user",
    "newRole": "staff"
  }
}
```

### æ–¹æ³•2ï¼šä½¿ç”¨Postmanï¼ˆæ¨èï¼‰

1. **æ‰“å¼€Postman**
2. **æ–°å»ºè¯·æ±‚**ï¼š
   - Method: `PUT`
   - URL: `http://localhost:3000/api/admin/users/{ç”¨æˆ·ID}/role`
3. **è®¾ç½®Headers**ï¼š
   - `Content-Type`: `application/json`
   - `Authorization`: `Bearer {ä½ çš„token}`
4. **è®¾ç½®Body**ï¼ˆraw, JSONï¼‰ï¼š
   ```json
   {
     "role": "staff"
   }
   ```
5. **ç‚¹å‡»Send**

### æ–¹æ³•3ï¼šç›´æ¥ä¿®æ”¹æ•°æ®åº“ï¼ˆæœ€å¿«ä½†éœ€è°¨æ…ï¼‰

```bash
# æå‡ä¸ºå·¥ä½œäººå‘˜
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "UPDATE users SET role = 'staff' WHERE phone = '13800138000' RETURNING id, phone, nickname, role;"

# æå‡ä¸ºç®¡ç†å‘˜ï¼ˆè°¨æ…ï¼ï¼‰
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "UPDATE users SET role = 'admin' WHERE phone = '13900139000' RETURNING id, phone, nickname, role;"

# é™çº§ä¸ºæ™®é€šç”¨æˆ·
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "UPDATE users SET role = 'user' WHERE phone = '13800138000' RETURNING id, phone, nickname, role;"
```

âš ï¸ **é‡è¦**ï¼šç›´æ¥ä¿®æ”¹æ•°æ®åº“åï¼Œç”¨æˆ·éœ€è¦**é‡æ–°ç™»å½•**æ‰èƒ½è·å¾—æ–°æƒé™ï¼

---

## ğŸ“ å¸¸è§åœºæ™¯

### åœºæ™¯1ï¼šæ–°å‘˜å·¥å…¥èŒï¼Œéœ€è¦éªŒç¥¨æƒé™

**æ­¥éª¤**ï¼š
1. è®©å‘˜å·¥è‡ªå·±æ³¨å†Œè´¦å·ï¼ˆæ‰‹æœºå·æ³¨å†Œï¼‰
2. è·å–å‘˜å·¥çš„ç”¨æˆ·IDæˆ–æ‰‹æœºå·
3. å°†å…¶æå‡ä¸º `staff`

```bash
# æŸ¥æ‰¾ç”¨æˆ·
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, nickname FROM users WHERE phone = '13800138001';"

# æå‡ä¸ºå·¥ä½œäººå‘˜ï¼ˆå¤åˆ¶ä¸Šé¢è¾“å‡ºçš„IDï¼‰
curl -X PUT http://localhost:3000/api/admin/users/{å¤åˆ¶çš„ID}/role \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {ä½ çš„token}" \
  -d '{"role": "staff"}'

# é€šçŸ¥å‘˜å·¥é‡æ–°ç™»å½•
```

### åœºæ™¯2ï¼šå‘˜å·¥ç¦»èŒï¼Œæ’¤é”€æƒé™

```bash
# é™çº§ä¸ºæ™®é€šç”¨æˆ·
curl -X PUT http://localhost:3000/api/admin/users/{å‘˜å·¥ID}/role \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {ä½ çš„token}" \
  -d '{"role": "user"}'
```

### åœºæ™¯3ï¼šæ·»åŠ ç¬¬äºŒä¸ªç®¡ç†å‘˜ï¼ˆå¤‡ä»½ï¼‰

```bash
# âš ï¸ è°¨æ…æ“ä½œï¼ç¡®è®¤å¯¹æ–¹å¯ä¿¡
curl -X PUT http://localhost:3000/api/admin/users/{ç”¨æˆ·ID}/role \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {ä½ çš„token}" \
  -d '{"role": "admin"}'
```

### åœºæ™¯4ï¼šæ‰¹é‡æŸ¥çœ‹å·¥ä½œäººå‘˜

```bash
# æŸ¥çœ‹æ‰€æœ‰å·¥ä½œäººå‘˜
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT phone, nickname, role, \"createdAt\" FROM users WHERE role IN ('staff', 'admin') ORDER BY role, \"createdAt\";"
```

---

## ğŸ’» ä½¿ç”¨Webç•Œé¢

### æœªæ¥ç‰ˆæœ¬ï¼ˆå¼€å‘ä¸­ï¼‰

æˆ‘ä»¬è®¡åˆ’å¼€å‘ä¸€ä¸ªç®¡ç†åå°ç•Œé¢ï¼š

**è·¯å¾„**ï¼š`/admin/users`

**åŠŸèƒ½é¢„è§ˆ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç®¡ç†                                    [æœç´¢ğŸ”] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‰‹æœºå·         æ˜µç§°        è§’è‰²      æ“ä½œ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  17701790343   ç®¡ç†å‘˜       admin    [æŸ¥çœ‹è¯¦æƒ…]      â”‚
â”‚  13800138000   å°æ         user     [æ”¹ä¸ºstaff] â–¼   â”‚
â”‚  13900139000   å°ç‹         staff    [æ”¹ä¸ºuser] â–¼    â”‚
â”‚  13700137000   å°å¼          user     [æ”¹ä¸ºstaff] â–¼   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¢„è®¡å¼€å‘æ—¶é—´**ï¼š1-2å¤©

**å¼€å‘ä¼˜å…ˆçº§**ï¼šâ­â­â­â­â­ï¼ˆå¼ºçƒˆæ¨èï¼‰

---

## ğŸ–¥ï¸ ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆé«˜çº§ï¼‰

### åˆ›å»ºå¿«æ·è„šæœ¬

ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œå¯ä»¥åˆ›å»ºä¸€äº›bashè„šæœ¬ï¼š

**1. æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ï¼š`view-users.sh`**
```bash
#!/bin/bash
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, nickname, role, \"createdAt\" FROM users ORDER BY \"createdAt\" DESC LIMIT 50;"
```

**2. æœç´¢ç”¨æˆ·ï¼š`find-user.sh`**
```bash
#!/bin/bash
# ä½¿ç”¨æ–¹æ³•: ./find-user.sh 13800138000
PHONE=$1
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, nickname, role FROM users WHERE phone = '$PHONE';"
```

**3. æå‡ä¸ºå·¥ä½œäººå‘˜ï¼š`make-staff.sh`**
```bash
#!/bin/bash
# ä½¿ç”¨æ–¹æ³•: ./make-staff.sh a1b2c3d4-e5f6-7890-abcd-ef1234567890
USER_ID=$1
TOKEN=$(cat ~/.admin-token)  # æå‰ä¿å­˜tokenåˆ°æ–‡ä»¶

curl -X PUT "http://localhost:3000/api/admin/users/$USER_ID/role" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"role": "staff"}'
```

---

## âœ… æœ€ä½³å®è·µ

### 1. ä¿å­˜ä½ çš„ç®¡ç†å‘˜Token

```bash
# åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
localStorage.getItem('token')

# å¤åˆ¶tokenï¼Œä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹
# ä¾‹å¦‚ï¼š~/.admin-token æ–‡ä»¶ï¼ˆä»…é™æœ¬åœ°å¼€å‘ï¼‰
```

### 2. è§’è‰²åˆ†é…åŸåˆ™

| æƒ…å†µ | æ¨èè§’è‰² |
|------|---------|
| æ™®é€šç”¨æˆ· | `user` |
| ç°åœºéªŒç¥¨äººå‘˜ | `staff` |
| ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆä½ ï¼‰ | `admin` |
| å¤‡ä»½ç®¡ç†å‘˜ï¼ˆå¯é€‰ï¼‰ | `admin` |

### 3. æƒé™åˆ†é…æµç¨‹

```
å‘˜å·¥æ³¨å†Œ â†’ ç®¡ç†å‘˜å®¡æ ¸ â†’ ç¡®è®¤èº«ä»½ â†’ åˆ†é…staff â†’ é€šçŸ¥é‡æ–°ç™»å½• â†’ å®Œæˆ
```

### 4. å®šæœŸå®¡è®¡

æ¯æœˆæ£€æŸ¥ä¸€æ¬¡æƒé™ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰ç®¡ç†å‘˜å’Œå·¥ä½œäººå‘˜
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "
    SELECT
      phone,
      nickname,
      role,
      \"createdAt\" as registered_date,
      \"updatedAt\" as last_updated
    FROM users
    WHERE role != 'user'
    ORDER BY role, \"createdAt\";
  "
```

### 5. å®‰å…¨å»ºè®®

- ğŸ”’ **tokenä¿å¯†**ï¼šä¸è¦åˆ†äº«ä½ çš„admin token
- ğŸ”„ **å®šæœŸæ›´æ¢å¯†ç **ï¼šæ¯3ä¸ªæœˆæ›´æ¢ä¸€æ¬¡ç®¡ç†å‘˜å¯†ç 
- ğŸ‘¥ **è‡³å°‘2ä¸ªç®¡ç†å‘˜**ï¼šè®¾ç½®å¤‡ä»½ç®¡ç†å‘˜ï¼Œé˜²æ­¢è´¦å·ä¸¢å¤±
- ğŸ“ **è®°å½•å˜æ›´**ï¼šé‡è¦çš„æƒé™å˜æ›´è¦åšè®°å½•
- ğŸš« **è°¨æ…æˆæƒ**ï¼šåªç»™çœŸæ­£éœ€è¦çš„äººåˆ†é…staff/admin

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæç¤º"ä»…ç®¡ç†å‘˜å¯ä»¥æ“ä½œ"

**åŸå› **ï¼šä½ çš„tokenä¸åŒ…å«adminè§’è‰²

**è§£å†³**ï¼š
1. é€€å‡ºç™»å½•
2. é‡æ–°ç™»å½•
3. è·å–æ–°token

### é—®é¢˜2ï¼šä¿®æ”¹åç”¨æˆ·æƒé™æ²¡å˜

**åŸå› **ï¼šç”¨æˆ·è¿˜åœ¨ä½¿ç”¨æ—§token

**è§£å†³**ï¼šé€šçŸ¥ç”¨æˆ·é‡æ–°ç™»å½•

### é—®é¢˜3ï¼šæ‰¾ä¸åˆ°ç”¨æˆ·ID

**æ–¹æ³•1ï¼šé€šè¿‡æ‰‹æœºå·æŸ¥æ‰¾**
```bash
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id FROM users WHERE phone = '13800138000';"
```

**æ–¹æ³•2ï¼šé€šè¿‡æ˜µç§°æ¨¡ç³Šæœç´¢**
```bash
PGPASSWORD="Liniuniu@7626" "/c/Program Files/PostgreSQL/18/bin/psql.exe" \
  -U postgres -d piaociyuan \
  -c "SELECT id, phone, nickname FROM users WHERE nickname LIKE '%æ%';"
```

### é—®é¢˜4ï¼šcurlå‘½ä»¤æŠ¥é”™

**æ£€æŸ¥æ¸…å•**ï¼š
- [ ] tokenæ˜¯å¦æ­£ç¡®ï¼ˆåŒ…å«Bearerå‰ç¼€ï¼‰
- [ ] URLæ˜¯å¦æ­£ç¡®ï¼ˆç”¨æˆ·IDæ˜¯å¦å¤åˆ¶å®Œæ•´ï¼‰
- [ ] Content-Typeæ˜¯å¦è®¾ç½®
- [ ] JSONæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆæ³¨æ„å¼•å·ï¼‰

**è°ƒè¯•æ–¹æ³•**ï¼š
```bash
# æ·»åŠ  -v å‚æ•°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
curl -v -X PUT http://localhost:3000/api/admin/users/{ID}/role \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {token}" \
  -d '{"role": "staff"}'
```

---

## ğŸ“Š å¿«é€Ÿå‚è€ƒ

### ä¸‰ä¸ªè§’è‰²

| è§’è‰² | æƒé™ | è°å¯ä»¥åˆ†é… |
|-----|------|----------|
| user | è´­ç¥¨ã€æŸ¥çœ‹è®¢å• | è‡ªåŠ¨ï¼ˆæ³¨å†Œæ—¶ï¼‰ |
| staff | user + éªŒç¥¨ | admin |
| admin | staff + æ”¹æƒé™ | adminï¼ˆéœ€è°¨æ…ï¼‰|

### APIç«¯ç‚¹

```
PUT /api/admin/users/:id/role
éœ€è¦ï¼šadminæƒé™
å‚æ•°ï¼š{"role": "user"|"staff"|"admin"}
```

### æ•°æ®åº“è¡¨

```sql
users
  - id: UUID
  - phone: æ‰‹æœºå·
  - nickname: æ˜µç§°
  - role: user|staff|admin  â† è¿™ä¸ªå­—æ®µ
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**ï¼šæµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æˆ–æœåŠ¡å™¨æ—¥å¿—
2. **æ£€æŸ¥æ•°æ®åº“**ï¼šç¡®è®¤roleå­—æ®µæ˜¯å¦æ­£ç¡®
3. **éªŒè¯token**ï¼šç¡®ä¿tokenåŒ…å«æ­£ç¡®çš„role
4. **é‡æ–°ç™»å½•**ï¼šå¾ˆå¤šé—®é¢˜é‡æ–°ç™»å½•å°±èƒ½è§£å†³

---

## ğŸ‰ æ€»ç»“

ä½œä¸ºç®¡ç†å‘˜ï¼Œä½ çš„ä¸»è¦å·¥ä½œï¼š

1. **æŸ¥çœ‹ç”¨æˆ·** â†’ ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢æˆ–æœªæ¥çš„Webç•Œé¢
2. **åˆ†é…æƒé™** â†’ ä½¿ç”¨APIæˆ–ç›´æ¥ä¿®æ”¹æ•°æ®åº“
3. **é€šçŸ¥ç”¨æˆ·** â†’ å‘Šè¯‰ä»–ä»¬é‡æ–°ç™»å½•
4. **å®šæœŸå®¡è®¡** â†’ æ£€æŸ¥æƒé™åˆ†é…æ˜¯å¦åˆç†

ç°åœ¨ä½ å·²ç»æŒæ¡äº†æ‰€æœ‰æƒé™ç®¡ç†çš„æ–¹æ³•ï¼ğŸŠ

---

## ğŸš€ ä¸‹ä¸€æ­¥

å»ºè®®å°½å¿«å¼€å‘Webç®¡ç†ç•Œé¢ï¼Œè¿™æ ·æ“ä½œä¼šæ›´æ–¹ä¾¿ï¼š
- ä¸éœ€è¦è®°å‘½ä»¤
- å¯è§†åŒ–æ“ä½œ
- é˜²æ­¢è¯¯æ“ä½œ
- æ›´å®¹æ˜“åŸ¹è®­å…¶ä»–ç®¡ç†å‘˜

é¢„è®¡å¼€å‘æ—¶é—´ï¼š1-2å¤©
ä¼˜å…ˆçº§ï¼šâ­â­â­â­â­
