# 票次元移动端功能同步计划

> 本文档详细规划了 Web 端到 Mobile 端的功能同步实施计划，分为 8 个阶段，共 80+ 项任务。

---

## 📊 总览

### 当前状态
- **Web 端功能完成度**: 95%（核心功能已完成）
- **Mobile 端功能完成度**: 30%（基础架构和认证完成）
- **功能差距**: 约 70 个功能点需要同步

### 预估工作量
- **总预估**: 60-80 小时
- **分阶段**: 8 个阶段，每阶段 5-15 小时
- **优先级**: 从高到低依次实施

---

## 🎯 阶段划分

| 阶段 | 名称 | 优先级 | 预估时长 | 状态 |
|-----|------|--------|----------|------|
| 阶段 0 | 基础架构优化 | 🔴 高 | 3-5h | 待开始 |
| 阶段 1 | 首页与内容管理 | 🔴 高 | 6-8h | 待开始 |
| 阶段 2 | 完整购票流程 | 🔴 高 | 8-10h | 待开始 |
| 阶段 3 | 门票详情与验票 | 🔴 高 | 4-6h | 待开始 |
| 阶段 4 | 社交功能（安可区） | 🟡 中 | 10-12h | 待开始 |
| 阶段 5 | 实时消息系统 | 🟡 中 | 8-10h | 待开始 |
| 阶段 6 | 个人中心扩展 | 🟡 中 | 6-8h | 待开始 |
| 阶段 7 | NFT 数字藏品 | 🟢 低 | 8-10h | 待开始 |
| 阶段 8 | 高级功能 | 🟢 低 | 8-10h | 待开始 |

---

## 阶段 0: 基础架构优化 (3-5 小时)

### 目标
优化现有架构，为后续功能开发打好基础。

### 任务清单

#### 0.1 状态管理升级
- [ ] 安装 Zustand 状态管理库
- [ ] 创建购物车 Store (CartStore)
- [ ] 创建通知 Store (NotificationStore)
- [ ] 创建收藏 Store (FavoriteStore)
- [ ] 迁移 AuthContext 到 Zustand（可选）

**文件**:
- `src/stores/cartStore.ts`
- `src/stores/notificationStore.ts`
- `src/stores/favoriteStore.ts`

#### 0.2 工具函数库
- [ ] 创建日期格式化工具 (`formatDate`, `formatTime`, `formatDateTime`)
- [ ] 创建价格格式化工具 (`formatPrice`)
- [ ] 创建错误处理工具 (`handleApiError`)
- [ ] 创建表单验证工具 (`validatePhone`, `validateEmail`, `validatePassword`)
- [ ] 创建图片处理工具 (`getImageUrl`, `compressImage`)

**文件**:
- `src/utils/date.ts`
- `src/utils/format.ts`
- `src/utils/error.ts`
- `src/utils/validation.ts`
- `src/utils/image.ts`

#### 0.3 自定义 Hooks
- [ ] `useDebounce` - 防抖 Hook
- [ ] `useThrottle` - 节流 Hook
- [ ] `useInfiniteScroll` - 无限滚动 Hook
- [ ] `usePagination` - 分页 Hook
- [ ] `useImagePicker` - 图片选择 Hook
- [ ] `usePermission` - 权限请求 Hook

**文件**:
- `src/hooks/useDebounce.ts`
- `src/hooks/useThrottle.ts`
- `src/hooks/useInfiniteScroll.ts`
- `src/hooks/usePagination.ts`
- `src/hooks/useImagePicker.ts`
- `src/hooks/usePermission.ts`

#### 0.4 UI 组件扩展
- [ ] `LoadingOverlay` - 全局加载遮罩
- [ ] `Toast` - 轻提示组件
- [ ] `Modal` - 弹窗组件
- [ ] `BottomSheet` - 底部弹出层
- [ ] `Skeleton` - 骨架屏组件
- [ ] `EmptyState` - 空状态组件
- [ ] `ErrorState` - 错误状态组件
- [ ] `Avatar` - 头像组件
- [ ] `Badge` - 徽章组件

**文件**:
- `src/components/LoadingOverlay.tsx`
- `src/components/Toast.tsx`
- `src/components/Modal.tsx`
- `src/components/BottomSheet.tsx`
- `src/components/Skeleton.tsx`
- `src/components/EmptyState.tsx`
- `src/components/ErrorState.tsx`
- `src/components/Avatar.tsx`
- `src/components/Badge.tsx`

#### 0.5 API 服务扩展
- [ ] 完善错误处理机制（统一错误拦截）
- [ ] 添加请求重试机制（网络失败自动重试）
- [ ] 添加请求缓存机制（活动列表、用户信息等）
- [ ] 添加请求取消机制（防止重复请求）
- [ ] 集成 Token 自动刷新

**文件**:
- `src/services/api.ts`（重构）

---

## 阶段 1: 首页与内容管理 (6-8 小时)

### 目标
实现移动端首页，包括轮播图、分类导航、活动推荐等核心内容。

### 任务清单

#### 1.1 首页 Banner 轮播
- [ ] 创建 Banner API 服务 (`getBanners`)
- [ ] 创建 Carousel 轮播组件
- [ ] 实现自动轮播和手势滑动
- [ ] 添加指示器
- [ ] 实现跳转链接

**文件**:
- `src/services/banners.ts`
- `src/components/Carousel.tsx`
- `src/components/BannerCard.tsx`

#### 1.2 首页栏目系统
- [ ] 创建栏目 API 服务 (`getHomepageSections`)
- [ ] 创建栏目组件 (`SectionBlock`)
- [ ] 实现手动栏目展示（管理员选择的活动）
- [ ] 实现自动分类栏目（按分类筛选）
- [ ] 实现自动状态栏目（按售票状态筛选）
- [ ] 添加"查看更多"跳转

**文件**:
- `src/services/homepage.ts`
- `src/components/SectionBlock.tsx`
- `src/components/SectionHeader.tsx`

#### 1.3 活动分类导航
- [ ] 创建分类导航组件 (`CategoryNav`)
- [ ] 实现分类图标和名称
- [ ] 添加分类筛选功能
- [ ] 集成到活动列表页

**文件**:
- `src/components/CategoryNav.tsx`
- `src/screens/EventsScreen.tsx`（更新）

#### 1.4 首页搜索
- [ ] 创建搜索栏组件 (`SearchBar`)
- [ ] 实现搜索历史记录
- [ ] 实现搜索建议
- [ ] 跳转到搜索结果页

**文件**:
- `src/components/SearchBar.tsx`
- `src/screens/SearchScreen.tsx`（新增）

#### 1.5 重构首页
- [ ] 整合所有首页模块
- [ ] 实现下拉刷新
- [ ] 添加骨架屏加载
- [ ] 添加错误处理

**文件**:
- `src/screens/HomeScreen.tsx`（重构）

---

## 阶段 2: 完整购票流程 (8-10 小时)

### 目标
实现从选票、下单、支付到查看订单的完整购票流程。

### 任务清单

#### 2.1 票档选择页面
- [ ] 创建票档列表组件 (`TierList`)
- [ ] 实现票档卡片展示（名称、价格、库存）
- [ ] 添加数量选择器 (`QuantitySelector`)
- [ ] 实现智能购票提示（自动分配 vs 手动选座）
- [ ] 计算总价
- [ ] 跳转到下单页

**文件**:
- `src/screens/TierSelectionScreen.tsx`（新增）
- `src/components/TierCard.tsx`
- `src/components/QuantitySelector.tsx`

#### 2.2 座位选择页面（可选）
- [ ] 创建座位图组件 (`SeatMap`)
- [ ] 实现座位状态显示（已售/可选/已锁定）
- [ ] 实现座位选择交互
- [ ] 添加选座时间倒计时
- [ ] 集成后端锁票 API

**文件**:
- `src/screens/SeatSelectionScreen.tsx`（新增）
- `src/components/SeatMap.tsx`

#### 2.3 下单确认页面
- [ ] 创建订单确认页 (`CheckoutScreen`)
- [ ] 展示活动信息、票档、数量、价格
- [ ] 添加联系人信息输入（可选）
- [ ] 添加备注输入
- [ ] 实现创建订单 API
- [ ] 跳转到支付页

**文件**:
- `src/screens/CheckoutScreen.tsx`（新增）

#### 2.4 支付页面
- [ ] 创建支付页 (`PaymentScreen`)
- [ ] 展示订单金额
- [ ] 集成支付方式选择（支付宝、微信、模拟支付）
- [ ] 实现支付倒计时（15 分钟）
- [ ] 调用支付 API
- [ ] 处理支付结果（成功/失败）

**文件**:
- `src/screens/PaymentScreen.tsx`（新增）
- `src/services/payment.ts`（新增）

#### 2.5 支付结果页
- [ ] 创建支付成功页 (`PaymentSuccessScreen`)
- [ ] 创建支付失败页 (`PaymentFailureScreen`)
- [ ] 展示订单详情
- [ ] 添加查看门票按钮
- [ ] 添加返回首页按钮

**文件**:
- `src/screens/PaymentSuccessScreen.tsx`（新增）
- `src/screens/PaymentFailureScreen.tsx`（新增）

#### 2.6 订单详情页
- [ ] 创建订单详情页 (`OrderDetailScreen`)
- [ ] 展示完整订单信息
- [ ] 添加订单状态流程图
- [ ] 实现支付按钮（待支付订单）
- [ ] 实现取消订单按钮
- [ ] 实现申请退款按钮
- [ ] 查看门票按钮（已支付订单）

**文件**:
- `src/screens/OrderDetailScreen.tsx`（新增）

#### 2.7 更新订单列表页
- [ ] 添加订单详情跳转
- [ ] 添加快捷操作（支付、取消、退款）
- [ ] 添加下拉刷新
- [ ] 添加无限滚动加载

**文件**:
- `src/screens/OrdersScreen.tsx`（更新）

---

## 阶段 3: 门票详情与验票 (4-6 小时)

### 目标
完善门票展示，支持二维码扫描和验票功能。

### 任务清单

#### 3.1 门票详情页
- [ ] 创建门票详情页 (`TicketDetailScreen`)
- [ ] 展示门票二维码（使用 `react-native-qrcode-svg`）
- [ ] 展示门票信息（活动、票档、座位、状态）
- [ ] 实现二维码放大查看
- [ ] 添加分享门票功能
- [ ] 添加退票按钮（未使用门票）

**文件**:
- `src/screens/TicketDetailScreen.tsx`（新增）
- 安装依赖: `react-native-qrcode-svg`

#### 3.2 扫码验票功能
- [ ] 创建扫码页 (`ScanTicketScreen`)
- [ ] 集成相机权限请求
- [ ] 实现二维码扫描（使用 `expo-camera`）
- [ ] 调用验票 API
- [ ] 展示验票结果（成功/失败/已使用）
- [ ] 添加手动输入票码功能

**文件**:
- `src/screens/ScanTicketScreen.tsx`（新增）
- `src/services/tickets.ts`（更新，添加 `verifyTicket`）
- 安装依赖: `expo-camera`

#### 3.3 更新门票列表页
- [ ] 添加门票详情跳转
- [ ] 添加门票状态标签
- [ ] 添加下拉刷新
- [ ] 添加过滤功能（全部/未使用/已使用/已退款）

**文件**:
- `src/screens/TicketsScreen.tsx`（更新）

---

## 阶段 4: 社交功能（安可区） (10-12 小时)

### 目标
实现完整的社交功能，包括帖子浏览、发布、互动等。

### 任务清单

#### 4.1 帖子列表页（安可区）
- [ ] 创建安可区页面 (`EncoreScreen`)
- [ ] 实现帖子列表展示（使用 FlatList）
- [ ] 创建帖子卡片组件 (`PostCard`)
- [ ] 实现无限滚动加载
- [ ] 实现下拉刷新
- [ ] 添加筛选功能（全部/关注的人）
- [ ] 添加发帖按钮（悬浮按钮）

**文件**:
- `src/screens/EncoreScreen.tsx`（新增）
- `src/components/PostCard.tsx`
- `src/services/posts.ts`（新增）

#### 4.2 发帖功能
- [ ] 创建发帖页 (`CreatePostScreen`)
- [ ] 实现文字输入（支持 5000 字）
- [ ] 实现图片选择（最多 9 张，使用 `expo-image-picker`）
- [ ] 实现关联活动选择
- [ ] 实现地理位置选择（可选）
- [ ] 实现图片预览和删除
- [ ] 调用发帖 API
- [ ] 上传图片（需集成 OSS）

**文件**:
- `src/screens/CreatePostScreen.tsx`（新增）
- `src/components/ImagePicker.tsx`
- 安装依赖: `expo-image-picker`

#### 4.3 更新帖子详情页
- [ ] 完善评论展示（支持二级评论）
- [ ] 添加回复功能
- [ ] 添加图片查看器（支持缩放、滑动）
- [ ] 添加作者信息跳转（查看用户主页）
- [ ] 优化 UI 布局

**文件**:
- `src/screens/PostDetailScreen.tsx`（更新）
- `src/components/CommentItem.tsx`
- `src/components/ImageViewer.tsx`

#### 4.4 用户主页
- [ ] 创建用户主页 (`UserProfileScreen`)
- [ ] 展示用户信息（头像、昵称、简介、认证徽章）
- [ ] 展示统计数据（帖子数、关注数、粉丝数、NFT 数）
- [ ] 展示用户帖子列表
- [ ] 添加关注/取消关注按钮
- [ ] 添加发私信按钮

**文件**:
- `src/screens/UserProfileScreen.tsx`（新增）

#### 4.5 关注/粉丝列表
- [ ] 创建关注列表页 (`FollowingListScreen`)
- [ ] 创建粉丝列表页 (`FollowerListScreen`)
- [ ] 实现用户列表展示
- [ ] 添加关注/取消关注按钮
- [ ] 添加用户主页跳转

**文件**:
- `src/screens/FollowingListScreen.tsx`（新增）
- `src/screens/FollowerListScreen.tsx`（新增）
- `src/services/follows.ts`（新增）

#### 4.6 收藏功能
- [ ] 创建收藏列表页 (`FavoritesScreen`)
- [ ] 展示收藏的帖子
- [ ] 添加取消收藏功能
- [ ] 添加帖子详情跳转

**文件**:
- `src/screens/FavoritesScreen.tsx`（新增）
- `src/services/favorites.ts`（新增）

---

## 阶段 5: 实时消息系统 (8-10 小时)

### 目标
实现基于 Socket.io 的实时私信系统。

### 任务清单

#### 5.1 Socket.io 客户端集成
- [ ] 安装 `socket.io-client`
- [ ] 创建 Socket 服务类 (`SocketService`)
- [ ] 实现连接/断开逻辑
- [ ] 实现 Token 认证
- [ ] 实现事件监听和发送
- [ ] 实现自动重连
- [ ] 创建 Socket Context（全局管理）

**文件**:
- `src/services/socket.ts`（新增）
- `src/contexts/SocketContext.tsx`（新增）
- 安装依赖: `socket.io-client`

#### 5.2 对话列表页
- [ ] 创建对话列表页 (`ConversationsScreen`)
- [ ] 实现对话列表展示
- [ ] 展示最后一条消息预览
- [ ] 展示未读消息数量（红点）
- [ ] 实时更新新消息
- [ ] 实现下拉刷新
- [ ] 添加新建对话按钮

**文件**:
- `src/screens/ConversationsScreen.tsx`（新增）
- `src/components/ConversationItem.tsx`
- `src/services/messages.ts`（新增）

#### 5.3 对话详情页（聊天页面）
- [ ] 创建聊天页 (`ChatScreen`)
- [ ] 实现消息列表展示（倒序显示）
- [ ] 实现实时消息推送（Socket.io）
- [ ] 实现消息发送
- [ ] 实现消息已读状态
- [ ] 实现正在输入状态
- [ ] 实现消息时间分组
- [ ] 添加消息输入框（支持多行）
- [ ] 添加发送按钮

**文件**:
- `src/screens/ChatScreen.tsx`（新增）
- `src/components/MessageBubble.tsx`
- `src/components/MessageInput.tsx`

#### 5.4 新建对话
- [ ] 创建选择用户页 (`SelectUserScreen`)
- [ ] 实现用户搜索
- [ ] 展示搜索结果（带头像和昵称）
- [ ] 选择用户后跳转到聊天页

**文件**:
- `src/screens/SelectUserScreen.tsx`（新增）

#### 5.5 在线状态管理
- [ ] 实现用户上线/下线监听
- [ ] 在聊天页显示对方在线状态
- [ ] 在对话列表显示在线状态

**文件**:
- `src/services/socket.ts`（更新）

---

## 阶段 6: 个人中心扩展 (6-8 小时)

### 目标
完善个人中心，添加资料编辑、设置、认证申请等功能。

### 任务清单

#### 6.1 编辑资料页
- [ ] 创建编辑资料页 (`EditProfileScreen`)
- [ ] 实现头像选择（从相册或相机）
- [ ] 实现预设头像选择（12 个预设头像）
- [ ] 实现昵称、简介、网站、所在地编辑
- [ ] 实现保存功能（调用更新 API）

**文件**:
- `src/screens/EditProfileScreen.tsx`（新增）
- `src/components/AvatarPicker.tsx`

#### 6.2 设置页面
- [ ] 创建设置页 (`SettingsScreen`)
- [ ] 实现账号安全设置（修改密码）
- [ ] 实现隐私设置（可选）
- [ ] 实现通知设置（推送开关）
- [ ] 实现关于页面（版本号、隐私政策、用户协议）
- [ ] 实现退出登录

**文件**:
- `src/screens/SettingsScreen.tsx`（新增）
- `src/screens/ChangePasswordScreen.tsx`（新增）
- `src/screens/AboutScreen.tsx`（新增）

#### 6.3 身份认证申请
- [ ] 创建认证申请页 (`VerificationScreen`)
- [ ] 实现认证类型选择（名人、艺人、主办方、官方）
- [ ] 实现表单填写（真实姓名、身份证号、机构）
- [ ] 实现证明材料上传（图片）
- [ ] 提交认证申请 API
- [ ] 查看认证状态（待审核/已通过/已拒绝）

**文件**:
- `src/screens/VerificationScreen.tsx`（新增）
- `src/services/verification.ts`（新增）

#### 6.4 更新个人中心页
- [ ] 添加编辑资料入口
- [ ] 添加设置入口
- [ ] 添加我的订单入口
- [ ] 添加我的门票入口
- [ ] 添加我的收藏入口
- [ ] 添加我的 NFT 入口
- [ ] 添加认证申请入口
- [ ] 展示用户统计（关注、粉丝、帖子、NFT）

**文件**:
- `src/screens/ProfileScreen.tsx`（更新）

---

## 阶段 7: NFT 数字藏品 (8-10 小时)

### 目标
实现 NFT 展示、铸造、详情查看等功能。

### 任务清单

#### 7.1 我的 NFT 页面
- [ ] 创建 NFT 列表页 (`MyNFTsScreen`)
- [ ] 实现 NFT 网格展示（2 列布局）
- [ ] 创建 NFT 卡片组件 (`NFTCard`)
- [ ] 展示 NFT 图片、名称、稀有度
- [ ] 添加下拉刷新
- [ ] 添加 NFT 详情跳转

**文件**:
- `src/screens/MyNFTsScreen.tsx`（新增）
- `src/components/NFTCard.tsx`
- `src/services/nft.ts`（新增）

#### 7.2 NFT 详情页
- [ ] 创建 NFT 详情页 (`NFTDetailScreen`)
- [ ] 展示 NFT 完整信息（名称、描述、稀有度、分类）
- [ ] 展示 3D 模型（如果有，使用 `expo-gl`）
- [ ] 展示区块链信息（合约地址、Token ID、所有者）
- [ ] 添加 OpenSea 跳转按钮
- [ ] 添加区块链浏览器跳转按钮
- [ ] 添加分享功能

**文件**:
- `src/screens/NFTDetailScreen.tsx`（新增）
- `src/components/NFTModel3D.tsx`（可选）

#### 7.3 绑定钱包
- [ ] 创建绑定钱包页 (`BindWalletScreen`)
- [ ] 实现钱包地址输入
- [ ] 实现钱包提供商选择（MetaMask、imToken 等）
- [ ] 调用绑定 API
- [ ] 展示绑定状态

**文件**:
- `src/screens/BindWalletScreen.tsx`（新增）

#### 7.4 NFT 铸造
- [ ] 创建 NFT 铸造页 (`MintNFTScreen`)
- [ ] 展示可铸造的 NFT 列表
- [ ] 实现铸造请求（调用铸造 API）
- [ ] 展示铸造进度（pending -> minting -> minted）
- [ ] 添加铸造完成通知

**文件**:
- `src/screens/MintNFTScreen.tsx`（新增）

#### 7.5 NFT 市场（可选）
- [ ] 创建 NFT 市场页 (`NFTMarketScreen`)
- [ ] 展示可购买的 NFT
- [ ] 实现 NFT 购买流程
- [ ] 集成支付功能

**文件**:
- `src/screens/NFTMarketScreen.tsx`（新增）

---

## 阶段 8: 高级功能 (8-10 小时)

### 目标
实现推送通知、深度链接、分享等高级功能。

### 任务清单

#### 8.1 推送通知
- [ ] 集成 Expo Notifications
- [ ] 请求推送权限
- [ ] 获取推送 Token
- [ ] 上传 Token 到服务器
- [ ] 实现通知点击跳转（深度链接）
- [ ] 实现通知管理页（查看历史通知）

**文件**:
- `src/services/notifications.ts`（新增）
- `src/screens/NotificationsScreen.tsx`（新增）
- 安装依赖: `expo-notifications`

#### 8.2 深度链接
- [ ] 配置 URL Scheme (`piaociyuan://`)
- [ ] 配置 Universal Links（iOS）
- [ ] 配置 App Links（Android）
- [ ] 实现路由解析和跳转
- [ ] 支持分享链接打开 App

**文件**:
- `app.json`（更新）
- `src/navigation/linking.ts`（新增）

#### 8.3 分享功能
- [ ] 集成 Expo Sharing
- [ ] 实现活动分享（图片 + 链接）
- [ ] 实现帖子分享
- [ ] 实现 NFT 分享
- [ ] 实现门票分享

**文件**:
- `src/services/share.ts`（新增）
- 安装依赖: `expo-sharing`

#### 8.4 性能优化
- [ ] 实现图片懒加载
- [ ] 实现图片缓存（使用 `expo-image`）
- [ ] 优化列表性能（使用 `FlashList` 替代 `FlatList`）
- [ ] 添加骨架屏加载
- [ ] 实现代码分割（动态导入）

**文件**:
- 全局优化
- 安装依赖: `expo-image`, `@shopify/flash-list`

#### 8.5 单元测试
- [ ] 配置 Jest 和 React Native Testing Library
- [ ] 编写 API 服务测试
- [ ] 编写工具函数测试
- [ ] 编写组件测试（Button, Input 等）

**文件**:
- `__tests__/` 目录

#### 8.6 E2E 测试（可选）
- [ ] 配置 Detox
- [ ] 编写关键流程测试（登录、注册、购票）

**文件**:
- `e2e/` 目录

---

## 📋 功能对照表

### 用户系统

| 功能 | Web | Mobile | 阶段 | 优先级 |
|-----|-----|--------|------|--------|
| 用户注册 | ✅ | ✅ | - | - |
| 用户登录 | ✅ | ✅ | - | - |
| Token 刷新 | ✅ | ✅ | - | - |
| 编辑资料 | ✅ | ❌ | 阶段 6 | 🟡 |
| 头像选择 | ✅ | ❌ | 阶段 6 | 🟡 |
| 修改密码 | ✅ | ❌ | 阶段 6 | 🟡 |
| 身份认证申请 | ✅ | ❌ | 阶段 6 | 🟡 |

### 活动票务

| 功能 | Web | Mobile | 阶段 | 优先级 |
|-----|-----|--------|------|--------|
| 活动列表 | ✅ | ✅ | - | - |
| 活动详情 | ✅ | ✅ | - | - |
| 活动搜索 | ✅ | ✅ | - | - |
| 活动分类筛选 | ✅ | ✅ | - | - |
| 首页 Banner | ✅ | ❌ | 阶段 1 | 🔴 |
| 首页栏目 | ✅ | ❌ | 阶段 1 | 🔴 |
| 票档选择 | ✅ | ❌ | 阶段 2 | 🔴 |
| 座位选择 | ✅ | ❌ | 阶段 2 | 🔴 |
| 创建订单 | ✅ | ✅ | - | - |
| 支付订单 | ✅ | ❌ | 阶段 2 | 🔴 |
| 查看订单 | ✅ | ✅ | - | - |
| 订单详情 | ✅ | ❌ | 阶段 2 | 🔴 |
| 取消订单 | ✅ | ✅ | - | - |
| 申请退款 | ✅ | ✅ | - | - |
| 门票列表 | ✅ | ✅ | - | - |
| 门票详情 | ✅ | ❌ | 阶段 3 | 🔴 |
| 门票二维码 | ✅ | ❌ | 阶段 3 | 🔴 |
| 扫码验票 | ❌ | ❌ | 阶段 3 | 🔴 |

### 社交功能

| 功能 | Web | Mobile | 阶段 | 优先级 |
|-----|-----|--------|------|--------|
| 帖子列表 | ✅ | ❌ | 阶段 4 | 🟡 |
| 帖子详情 | ✅ | ✅ | - | - |
| 发布帖子 | ✅ | ❌ | 阶段 4 | 🟡 |
| 点赞帖子 | ✅ | ✅ | - | - |
| 评论帖子 | ✅ | ✅ | - | - |
| 收藏帖子 | ✅ | ❌ | 阶段 4 | 🟡 |
| 举报帖子 | ✅ | ✅ | - | - |
| 关注用户 | ✅ | ❌ | 阶段 4 | 🟡 |
| 用户主页 | ✅ | ❌ | 阶段 4 | 🟡 |
| 关注列表 | ✅ | ❌ | 阶段 4 | 🟡 |
| 粉丝列表 | ✅ | ❌ | 阶段 4 | 🟡 |

### 实时消息

| 功能 | Web | Mobile | 阶段 | 优先级 |
|-----|-----|--------|------|--------|
| 对话列表 | ✅ | ❌ | 阶段 5 | 🟡 |
| 聊天页面 | ✅ | ❌ | 阶段 5 | 🟡 |
| 发送消息 | ✅ | ❌ | 阶段 5 | 🟡 |
| 实时推送 | ✅ | ❌ | 阶段 5 | 🟡 |
| 消息已读 | ✅ | ❌ | 阶段 5 | 🟡 |
| 正在输入 | ✅ | ❌ | 阶段 5 | 🟡 |
| 在线状态 | ✅ | ❌ | 阶段 5 | 🟡 |

### NFT 数字藏品

| 功能 | Web | Mobile | 阶段 | 优先级 |
|-----|-----|--------|------|--------|
| 我的 NFT 列表 | ✅ | ❌ | 阶段 7 | 🟢 |
| NFT 详情 | ✅ | ❌ | 阶段 7 | 🟢 |
| 绑定钱包 | ✅ | ❌ | 阶段 7 | 🟢 |
| NFT 铸造 | ✅ | ❌ | 阶段 7 | 🟢 |
| NFT 市场 | ❌ | ❌ | 阶段 7 | 🟢 |

### 高级功能

| 功能 | Web | Mobile | 阶段 | 优先级 |
|-----|-----|--------|------|--------|
| 推送通知 | ❌ | ❌ | 阶段 8 | 🟢 |
| 深度链接 | ❌ | ❌ | 阶段 8 | 🟢 |
| 分享功能 | ❌ | ❌ | 阶段 8 | 🟢 |

---

## 🎨 设计规范

### 色彩系统
- **主色**: `#6366F1`（Indigo）
- **次色**: `#8B5CF6`（Purple）
- **成功**: `#10B981`（Green）
- **警告**: `#F59E0B`（Amber）
- **错误**: `#EF4444`（Red）
- **背景**: `#F9FAFB`（Gray 50）
- **表面**: `#FFFFFF`（White）
- **文字**: `#111827`（Gray 900）
- **次要文字**: `#6B7280`（Gray 500）
- **边框**: `#E5E7EB`（Gray 200）

### 间距系统
- **xs**: 4px
- **sm**: 8px
- **md**: 16px
- **lg**: 24px
- **xl**: 32px
- **xxl**: 48px

### 字体系统
- **xs**: 12px
- **sm**: 14px
- **md**: 16px
- **lg**: 18px
- **xl**: 20px
- **xxl**: 24px
- **xxxl**: 32px

### 圆角
- **small**: 4px
- **medium**: 8px
- **large**: 12px
- **full**: 9999px

---

## 📦 依赖安装清单

### 阶段 0
```bash
npm install zustand
```

### 阶段 1
无新依赖

### 阶段 2
无新依赖

### 阶段 3
```bash
npm install react-native-qrcode-svg react-native-svg
npx expo install expo-camera
```

### 阶段 4
```bash
npx expo install expo-image-picker
```

### 阶段 5
```bash
npm install socket.io-client
```

### 阶段 6
无新依赖（使用阶段 4 的 expo-image-picker）

### 阶段 7
```bash
npx expo install expo-gl
```

### 阶段 8
```bash
npx expo install expo-notifications expo-sharing expo-image
npm install @shopify/flash-list
```

---

## 🚀 实施建议

### 1. 优先级策略
- **先完成核心购票流程**（阶段 1-3）：确保用户能完整体验从浏览活动到购票的流程
- **再完善社交功能**（阶段 4-5）：提升用户粘性
- **最后实现增强功能**（阶段 6-8）：提升产品竞争力

### 2. 质量控制
- 每个阶段完成后进行测试
- 关键功能编写单元测试
- 定期进行代码 Review

### 3. 敏捷开发
- 每个阶段作为一个迭代
- 每个迭代结束后可发布测试版本
- 收集用户反馈，及时调整

### 4. 技术债务管理
- 在阶段 0 打好基础，减少后续重构
- 及时记录技术债务
- 每个阶段结束后留出时间优化

### 5. 文档维护
- 更新本文档的完成状态
- 记录遇到的问题和解决方案
- 维护 API 文档和组件文档

---

## 📊 进度追踪

### 完成标准
- [ ] 阶段 0: 基础架构优化 (0%)
- [ ] 阶段 1: 首页与内容管理 (0%)
- [ ] 阶段 2: 完整购票流程 (0%)
- [ ] 阶段 3: 门票详情与验票 (0%)
- [ ] 阶段 4: 社交功能 (20% - 仅帖子详情完成)
- [ ] 阶段 5: 实时消息系统 (0%)
- [ ] 阶段 6: 个人中心扩展 (0%)
- [ ] 阶段 7: NFT 数字藏品 (0%)
- [ ] 阶段 8: 高级功能 (0%)

**总体进度: 2.5%**

---

## 📝 更新日志

### 2025-11-05
- 创建功能同步计划文档
- 定义 8 个开发阶段
- 完成功能对照表
- 估算工作量和优先级

---

## 🤝 参与贡献

如有问题或建议，请及时沟通并更新本文档。

---

**最后更新**: 2025-11-05
**版本**: v1.0.0
